:host {
  display: block;
}

.message {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.15rem;
}

.message.outgoing {
  align-items: flex-end;
}

.bubble {
  max-width: min(780px, 72%);
  padding: 0.35rem 0.7rem;
  border-radius: 12px;
  border: 1px solid var(--chat-bubble-border, var(--surface-border));
  background: var(--chat-bubble, var(--surface-panel));
  box-shadow: var(--chat-bubble-shadow, 0 4px 12px rgba(15, 23, 42, 0.08));
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.bubble[data-role='assistant'] {
  background: var(--chat-assistant-bg, var(--primary-50, #eef2ff));
  border-color: var(--chat-assistant-border, var(--primary-100, #cbd5e1));
}

.bubble[data-role='user'] {
  background: var(--chat-user-bg, var(--surface-card));
}

.bubble[data-role='system'] {
  background: var(--chat-system-bg, var(--surface-ground));
}

.bubble[data-role='tool'] {
  max-width: 100%;
  padding: 0;
  border: none;
  background: transparent;
  box-shadow: none;
}

.bubble p {
  margin: 0;
  white-space: pre-wrap;
  font-family: 'SFMono-Regular', ui-monospace, Menlo, Consolas, monospace;
}

.role-footer {
  font-size: 0.85rem;
  font-style: italic;
  color: var(--text-secondary);
  margin-top: 0.15rem;
  padding: 0 0.35rem;
  align-self: flex-start;
}

.role-footer.outgoing {
  align-self: flex-end;
}

@media (max-width: 700px) {
  .bubble {
    max-width: 100%;
  }
}

